# 🚀 Azure Active Directory でアプリ登録を構成

WPF のデスクトップアプリを Azure Acitive Directory で認証するために必要な、Azure Active Directory のアプリ登録を行います。

ここでは、マルチテナント構成のアプリ登録を行います。

## 📜 Azure Active Directory を表示

ブラウザーで Azure ポータルを開き Azure Active Directory のリソースを表示します。以下を参考に表示できます。

- Azure ポータル ( https://portal.azure.com ) を開きます。
- 表示された画面上部右に表示されているディレクトリが正しいことを確認します (図①)。異なる場合はディレクトリを正しいディレクトリへ切り替えます。
- 画面上部の検索で「active」と入力します(図②)。
- Active Directory が表示されますので、クリックします (図③)。Azure Active Directory のリソースが表示されます。

![image](./images/01_01.png)

<br>

## 📜 アプリの登録: 新規作成

Azure Active Directory のリソースの左メニューで **アプリの登録** をクリックします (図①)。  
画面上部の **新規登録** をクリック(図②)すると、**アプリケーションの登録** が表示されます。

![image](./images/01_02.png)

<br>

- **名前** には任意の名称を入力します。ここでは例として **mstep-client-app-multi** と入力しています。
- **サポートされているアカウントの種類** は下図を参考に選択します。
- **登録** ボタンをクリックして登録すると、作成したアプリが表示されます。

![image](./images/01_03.png)

<br>

## 📜 アプリの登録: 認証を構成

- 左メニューの **認証** をクリックします (図①)。
- **プラットフォームの追加** をクリック(図②）すると、**プラットフォームの構成**が表示されます。

![image](./images/01_04.png)

<br>

プラットフォームの構成で **モバイルアプリケーションとデスクトップアプリケーション** をクリックします。

![image](./images/01_05.png)

<br>

リダイレクト URI は、`https://login.microsoftonline.com/common/oauth2/nativeclient` にチェックを入れます。

**構成** ボタンをクリックすると、モバイルアプリケーションとデスクトップアプリケーションのプラットフォームが追加されます。

<br>


## 📜 まとめ

以上で、デスクトップアプリでマルチテナントでの認証を行う上でアプリ登録の設定が完了しました。

次のワークショップでで以下の情報を利用します。メモしておきましょう。

- モバイルアプリケーションとデスクトップアプリケーション で設定したリダイレクト URI の値: `https://login.microsoftonline.com/common/oauth2/`
- テナント ID と クライアント ID
  - 登録したアプリの **概要** をクリックすると表示されます。

<br>

---

[次へ進む: WPF での認証](./2_wpf.md)
